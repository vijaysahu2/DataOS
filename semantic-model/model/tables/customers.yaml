tables:
  - name: customers
    sql: {{ load_sql('customers') }}
    description: Customers data.
    public: true

    joins:
      - name: contracts
        relationship: one_to_many
        sql: "{TABLE.id}= {contracts.customer_id}"


    dimensions:    
      - name: industry
        type: string
        column: industry
        description: "The industry sector associated with the customer, such as healthcare, finance, or manufacturing."

      - name: region
        type: string
        column: region
        description: "The geographical region or area where the customer is located."

      - name: account_manager
        type: string
        column: account_manager
        description: "The assigned account manager responsible for customer engagement."

      - name: engagement_level
        type: string
        column: engagement_level
        description: "The level of engagement with the customer, such as low, medium, or high."

      - name: status
        type: string
        column: status
        description: "The current status of the customer record, such as active, inactive, or pending."

      - name: discovery_session_start_date
        type: time
        column: discovery_session_start_date
        description: "The start date and time of the first discovery session with the customer."

      - name: total_discovery_sessions_conducted
        type: number
        column: total_discovery_sessions_conducted
        description: "The total number of discovery sessions conducted with the customer."

      - name: last_discovery_session_conducted_date
        type: time
        column: last_discovery_session_conducted_date
        description: "The date and time of the most recent discovery session conducted with the customer."

      - name: key_stake_holders_to_contact
        type: string
        column: key_stake_holders_to_contact
        description: "A list of key stakeholders or points of contact for the customer."
        meta:
          secure:
            func: redact
            user_groups: 
              includes: "*" 
              excludes:
                - reader   

      - name: catalog_address
        type: string
        column: catalog_address
        description: "The address or endpoint for the customer's catalog or data source."

      - name: created_at
        type: time
        column: created_at
        description: "The timestamp when the customer record was created."

      - name: id
        type: number
        column: id
        description: "A unique identifier for the customer record."
        primary_key: true
        public: true

      - name: name
        type: string
        column: name
        description: "The name of the customer."

      - name: type
        type: string
        column: type
        description: "The type of customer, such as enterprise, partner, or individual."

      - name: updated_at
        type: time
        column: updated_at
        description: "The timestamp of the most recent update to the customer record."


    measures:
      - name: count
        sql: "{TABLE.id}"
        type: count_distinct
        description: Total number of customers.



